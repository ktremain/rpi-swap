.TH SWAP.CONF 5 "rpi-swap" "rpi-swap Configuration"

.SH NAME
swap.conf, swap.conf.d \- Raspberry Pi swap management configuration files

.SH SYNOPSIS
/etc/rpi/swap.conf
/run/rpi/swap.conf
/usr/local/lib/rpi/swap.conf
/usr/lib/rpi/swap.conf
/etc/rpi/swap.conf.d/*.conf
/run/rpi/swap.conf.d/*.conf
/usr/local/lib/rpi/swap.conf.d/*.conf
/usr/lib/rpi/swap.conf.d/*.conf

.SH DESCRIPTION
These files configure various parameters of the Raspberry Pi swap management scripts. See systemd.syntax(7) for a general description of the syntax.

.SH CONFIGURATION DIRECTORIES AND PRECEDENCE
The default configuration is set in the swap management scripts, so configuration is only needed when it is necessary to deviate from those defaults. The main configuration file is loaded from /etc/rpi/swap.conf.

Local overrides can also be created by creating drop-ins. The main configuration file can also be edited for this purpose, however using drop-ins for local configuration is recommended over modifications to the main configuration file.

Drop-in configuration snippets are read from /etc/rpi/swap.conf.d/*.conf. Those drop-ins have higher precedence and override the main configuration file. Files in the *.conf.d/ configuration subdirectories are sorted by their filename in lexicographic order. When multiple files specify the same option, for options which accept just a single value, the entry in the file sorted last takes precedence.

To disable a configuration file supplied by the vendor, the recommended way is to place a symlink to /dev/null in the configuration directory in /etc/, with the same filename as the vendor configuration file.

.SH OPTIONS
All options are configured in either the [RpiSwap] or [Swapfile] sections.

.SS "[RpiSwap] Section Options"

.TP
\fBMechanism=\fR
Controls which swap mechanism to use. One of "auto", "swapfile", "zram", and "zram+file".
.RS
.IP \(bu 2
\fBauto\fR: Automatically selects the best mechanism. For systems with the BCM2710 SoC (Raspberry Pi 3 and later), this defaults to "zram+file". For all other systems, it defaults to "swapfile".
.IP \(bu 2
\fBswapfile\fR: A traditional swap file is created on the root filesystem.
.IP \(bu 2
\fBzram\fR: A compressed RAM-based swap device is created. No swap file is used.
.IP \(bu 2
\fBzram+file\fR: A compressed RAM-based swap device is created, with the swap file specified in \fBSwapfile::Path\fR as a backing store.
.RE
.IP
Defaults to "\fBauto\fR".

.SS "[Swapfile] Section Options"
These options are disregarded for mechanisms that don't involve a file (e.g. "zram"), and any existing swap file will be removed to free up disk space.

.TP
\fBPath=\fR
The path to the swap file. This is used directly by the "swapfile" mechanism, and as a backing store via a loop device for the "zram+file" mechanism. Defaults to "\fB/var/swap\fR".

.TP
\fBSwapFactor=\fR
Target swap size as a factor of system memory. For example, a value of "1" means a swap size equal to the total system RAM. The final swap size is constrained by \fBMaxSwap\fR and \fBMaxDiskPct\fR.

.TP
\fBMaxSwap=\fR
The maximum swap size in MiB. This limits the swap size irrespective of the \fBSwapFactor\fR. Set to an empty string to disable this limit. Defaults to "\fB2048\fR".

.TP
\fBMaxDiskPct=\fR
The maximum percentage of available disk space to use for the swap file, to prevent it from consuming too much storage. Defaults to "\fB50\fR".

.TP
\fBSwapSize=\fR
An explicit swap size in MiB. If set, this value overrides the \fBSwapFactor\fR calculation and is used directly.

.SH SEE ALSO
\fBsystemd.syntax\fR(7), \fBrpi-swap-generator\fR(8)

.SH NOTES
.IP "ðŸ’£ðŸ’¥ðŸ§¨ðŸ’¥ðŸ’¥ðŸ’£" 4
Please note that these configuration files must be available at all times. If /usr/local/ is a separate partition, it may not be available during early boot, and must not be used for configuration.
